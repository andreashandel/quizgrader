# Documentation for working on the package

## Package structure/use 
See the vignettes for details.

## Package organization


### Folder structure

* `/auxiliary` contains folders with related resources that are not directly part of the package but are useful (to the package authors) for maintenance/development/tracking/etc. of the package
* `/docs` contains the package website created by the pkgdown package. Rebuild with pkgdown::build_site(). Don't edit manually.
* `/inst` contains several subfolders, further described below. 
* `/man` contains the documentation for all public functions, automatically generated by roxygen. Do not edit.
* `/Meta` contains vignette information and is auto-created by devtools when package is built. Ignore.
* `/pkgdown` contains extra files for styling of pkgdown created website. Edit to change layout of package website.
* `/R` contains the main R functions, i.e. the simulators and various helper functions. See more details below.
* `/tests` contains code/unit tests, done with the testthat package. Add tests as new functionality is added.
* `/vignettes` contains the vignette - this is copied to /inst/doc during package building. edits should be done to the file in the /vignettes folder, not the /inst/doc folder.


### Functions/files in the R folder

The main functions that are exposed to a user are the following:
* `start_course` - 

The following are helper functions that are used internally but not exposed to the user:


### Materials inside the /inst folder
The /inst folder contains several subfolders 

* `/apps` sub-folder which contains the different shiny apps which are part of the package.
* `/templates` sub-folder which contains the Excel templates for the class list and quizzes.




## Information for package development

### To work on package (through RStudio): 
* Clone package.
* Load project in RStudio. Edit files as needed.
* Use devtools/roxygen to build and document the package. Either use RStudio's functionality (or command line) to test/build packages using devtools. The package follows Hadley's recommendations and workflow described here: https://r-pkgs.org/ 
* Optionally, use RStudio tie-in with github to sync project to github (the 'git' tab). Alternatively, use your favorite git client.
* Rtools needs to be installed (on Windows).

### Dependency packages 
All libraries/packages needed to allow the package to run should be loaded via the DESCRIPTION file and not in separate R files. See that file for dependencies.

Additional packages are needed for development (but not use) of the package. Those are listed in the suggests section of the DESCRIPTION file. 

### Github action integration
To enable continuous checking and other GitHub actions, use the 'usethis' package as follows:
* use_github_action_check_release()
* 

### Package logo
According to pkgdown, logo should be included as described here:
https://pkgdown.r-lib.org/reference/build_home.html#package-logo


### To update R documentation, vignettes and website
* Edit documentation inside R functions, build documentation with More/Document or devtools::document()
* Edit vignette inside the /vignettes folder, run devtools::build_vignettes()
* Edit Readme.Rmd and other package website related documents, run pkgdown::build_site()


### To build the package
* in RStudio, use the functions in the 'build' tab to test and build the package.
* Run clean and rebuild, then build and reload using menu, or devtools::load_all()
* Run the check, fix any errors 


### To-do for CRAN release  
* "by hand" edit the DESCRIPTION file to make sure it's up to date
* update news.md and cran-comments.md
* run processing-script to Re-build documentation, vignettes and copy latest versions of simulator functions - see above
* Run check and make sure no problems occur
* Sync everything to github
* Run devtools::check_rhub(), devtools::check_win_release() and devtools::check_win_devel()
* Do a test run of devtools::release() - fix any remaining issues, then re-run and release

### Trouble-shooting
* If you get the 'can't find qpdf error' during build, try this (on windows): https://stackoverflow.com/questions/41570633/how-to-build-qpdf-on-windows
